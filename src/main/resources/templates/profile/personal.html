<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
      <meta charset="utf-8">
	  <meta content="width=device-width, initial-scale=1.0" name="viewport">
	  <title>Mi perfil</title>
	  <meta content="" name="description">
	  <meta content="" name="keywords">
	  
	  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Roboto:300,300i,400,400i,500,500i,700,700i&display=swap" rel="stylesheet">
	  <link th:href="@{/images/favicon.png}" rel="icon">
	  <link th:href="@{/vendor/animate.css/animate.min.css}" rel="stylesheet">
	  <link th:href="@{/vendor/aos/aos.css}" rel="stylesheet">
	  <link th:href="@{/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet">
	  <link th:href="@{/vendor/bootstrap-icons/bootstrap-icons.css}" rel="stylesheet">
	  <link th:href="@{/vendor/boxicons/css/boxicons.min.css}" rel="stylesheet">
	  <link th:href="@{/vendor/glightbox/css/glightbox.min.css}" rel="stylesheet">
	  <link th:href="@{/vendor/swiper/swiper-bundle.min.css}" rel="stylesheet">
	  <link th:href="@{/css/style.css}" rel="stylesheet">
  </head>
  <body>
    <div id="header" class="fixed-top d-flex align-items-center ">
       <header th:insert="fragments/header.html :: navbar"></header>
     </div>
     
    <div class="d-flex justify-content-center">
      <div class="card" style="margin-top: 40px;">
        <h4 class="card-header">
          <strong>Mi perfil</strong>
        </h4>
        <div class="card-body">
          <form th:action="@{/profile/save}" method="POST" th:object="${user}" enctype="multipart/form-data">
            <div th:if="${msg != null}" class='alert alert-success' th:text="${msg}" role='alert'></div>
            <div th:if="${alert != null}" class='alert alert-danger' th:text="${alert}" role='alert'></div>
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <div class="form-group mb-3">
                    <input type="hidden" th:field="*{id}"></input>
                    <input type="hidden" th:field="*{enabled}"></input>
                    <input type="hidden" th:field="*{email}"></input>
                    <input type="hidden" th:field="*{role}"></input>
                    <label class="form-label">Nombre</label>
                    <input class="form-control" id="firstName" name="firstName" th:field="*{firstName}" type="text" required="required" />
                  </div>
                  <div class="form-group mb-3">
                    <label class="form-label">Apellido</label>
                    <input class="form-control" id="lastName" name="lastName" th:field="*{lastName}" type="text" required="required" />
                  </div>
                  <div class="form-group mb-3">
                    <label class="form-label">Email</label>
                    <input class="form-control" id="email" name="email" th:field="*{email}" type="email" disabled>
                  </div>
                  <div class="form-group mb-3">
                    <label class="form-label">Clave</label>
                    <input class="form-control" id="password" name="password" th:field="*{password}" type="password" required="required" />
                  </div>
                  <div class="form-group mb-3">
                    <label class="form-label">Foto de perfil</label>
                    <img class="rounded mx-auto d-block" th:src="@{/images/users/{img} (img=${user.photo})}" alt="Sin avatar" width="200" height="200"><br/>
                    <input type="file" class="form-control-file" name="profilePicture" id="profilePicture">
                  </div>
                </div>
              </div>
            </div>
            <div style="margin-top: 20px">
              <p>Vuelva a ingresar la contraseña para salvar los cambios o <br> ingrese una nueva si desea modificarla. </p>
              <a class="btn btn-info" style="color: white" onclick="history.back(-1)">Volver</a>
              <button type="submit" class="btn btn-success">Guardar </button>
              <a class="btn btn-danger" style="color: white" th:href="@{/profile/delete/{id} (id=${user.id}) }" onclick="confirm('¿Estas seguro de eliminar su cuenta? Esta acción no puede deshacerse')" role="button" title="Eliminar"> Eliminar cuenta</a>
            </div>
          </form>
        </div>
      </div>
    </div>
    
    <footer th:insert="fragments/footer.html :: footer" style="margin-top: 15px"></footer>
    <div id="preloader"></div>
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center" title="Volver arriba">
      <i class="bi bi-arrow-up-short"></i>
    </a>
    
    <script th:src="@{/vendor/purecounter/purecounter_vanilla.js}"></script>
    <script th:src="@{/vendor/aos/aos.js}"></script>
    <script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/vendor/glightbox/js/glightbox.min.js}"></script>
    <script th:src="@{/vendor/isotope-layout/isotope.pkgd.min.js}"></script>
    <script th:src="@{/vendor/swiper/swiper-bundle.min.js}"></script>
    <script th:src="@{/vendor/waypoints/noframework.waypoints.js}"></script>
    <script th:src="@{/js/main.js}"></script>
  </body>
</html>